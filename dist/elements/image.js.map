{"version":3,"sources":["../../src/elements/image.js"],"names":[],"mappings":"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","file":"image.js","sourcesContent":["const React = require('react');\n\nclass Image extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.lastTransformation = {\n      x: 0,\n      y: 0\n    };\n    this.isDragging = false;\n\n    this.state = {\n      transform: 'matrix(1 0 0 1 0 0)'\n    };\n\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n  }\n\n  handleMouseDown(e) {\n    this.isDragging = true;\n    this.clickPosition = {\n      x: e.pageX,\n      y: e.pageY\n    }\n  }\n\n  handleMouseMove(e) {\n    if(false !== this.isDragging) {\n      const xDiff = e.pageX - this.clickPosition.x + this.lastTransformation.x;\n      const yDiff = e.pageY - this.clickPosition.y + this.lastTransformation.y;\n\n      this.setState({\n        transform: 'matrix(1 0 0 1 ' + xDiff + ' ' + yDiff + ')'\n      });\n    }\n  }\n\n  handleMouseUp(e) {\n    this.isDragging = false;\n    const transform = this.state.transform.match(/matrix\\(1 0 0 1 (.*?)\\)/)[1].split(' ');\n\n    this.lastTransformation = {\n      x: parseInt(transform[0]),\n      y: parseInt(transform[1])\n    };\n  }\n\n  render() {\n    const {\n      x, y,\n      height, width,\n      href,\n      draggable\n    } = this.props;\n\n\n    let handleMouseDown = null;\n    let handleMouseMove = null;\n    let handleMouseUp = null;\n    let style = null;\n    if(draggable) {\n      handleMouseDown = this.handleMouseDown;\n      handleMouseMove = this.handleMouseMove;\n      handleMouseUp = this.handleMouseUp;\n      style = {\n        cursor: 'move'\n      };\n    }\n\n    const { transform } = this.state;\n    \n    return (\n      <image xlinkHref={href}\n             x={x}\n             y={y}\n             height={height}\n             width={width}\n             preserveAspectRatio=\"xMinYMin meet\"\n             onMouseDown={handleMouseDown}\n             onMouseMove={handleMouseMove}\n             onMouseUp={handleMouseUp}\n             style={style}\n             transform={transform} />\n    );\n  }\n\n}\n\n// Prop types\nImage.propTypes = {\n  x: React.PropTypes.number.isRequired,\n  y: React.PropTypes.number.isRequired,\n  href: React.PropTypes.string.isRequired,\n  ratio: React.PropTypes.string.isRequired\n};\n\nImage.defaultProps = {\n  x: 0,\n  y: 0,\n  ratio: \"auto\"\n}\n\nmodule.exports = Image;"]}